<!DOCTYPE html>
<html>
<body>
<h1>Quo Vadis</h1>


<p id="money">You have 50.  Opponent has 50.</p>
<p id="board">YOU|.|.|x|.|.|THEM</p>
<p id="compReadout">???</p>

<!--
<button type="button" onclick="moveleft()">Left</button>
<button type="button" onclick="moveright()">Right</button>
<button type="button" onclick="clearField()">Clear</button>
-->


<div id="inputdiv">
	<input type="number" id="bidIn">
	<button type="button" onclick="bid()" id="bidButton">Bid!</button>
</div>
<br />
<button type="button" onclick="reset()">Reset!</button>

<br /><br />
<p id="debug"></p>

    
<script type="text/javascript">
var pos = 3;
var humanMoney = 50;
var compMoney = 50;
var round = 0;
var bidList = [17, 13, 8, 5, 3, 2, 1, 1];

function moveleft() {
	pos = pos - 1;
    if(pos <= 0) {
		document.getElementById("board").innerHTML = "You Win!!";
		document.getElementById("inputdiv").style.display = "none"
	}
	if(pos == 1) document.getElementById("board").innerHTML = "YOU|x|.|.|.|.|THEM";
	if(pos == 2) document.getElementById("board").innerHTML = "YOU|.|x|.|.|.|THEM";
	if(pos == 3) document.getElementById("board").innerHTML = "YOU|.|.|x|.|.|THEM";
	if(pos == 4) document.getElementById("board").innerHTML = "YOU|.|.|.|x|.|THEM";
	if(pos == 5) document.getElementById("board").innerHTML = "YOU|.|.|.|.|x|THEM";
	if(pos == 6){
		document.getElementById("board").innerHTML = "You Lose";
		document.getElementById("inputdiv").style.display = "none"
	}
}

function moveright() {
	pos = pos + 1;
    if(pos <= 0) {
		document.getElementById("board").innerHTML = "You Win!!";
		document.getElementById("inputdiv").style.display = "none"
	}
	if(pos == 1) document.getElementById("board").innerHTML = "YOU|x|.|.|.|.|THEM";
	if(pos == 2) document.getElementById("board").innerHTML = "YOU|.|x|.|.|.|THEM";
	if(pos == 3) document.getElementById("board").innerHTML = "YOU|.|.|x|.|.|THEM";
	if(pos == 4) document.getElementById("board").innerHTML = "YOU|.|.|.|x|.|THEM";
	if(pos == 5) document.getElementById("board").innerHTML = "YOU|.|.|.|.|x|THEM";
	if(pos == 6) {
		document.getElementById("board").innerHTML = "You Lose";
		document.getElementById("inputdiv").style.display = "none"
	}
	
}

function reset() {
	pos = 3;
	humanMoney = 50;
	compMoney = 50;
	round=0;
	document.getElementById("board").innerHTML = "YOU|.|.|x|.|.|THEM";
	document.getElementById("money").innerHTML = "You have " + humanMoney + ".  Opponent has " + compMoney + ".";
	document.getElementById("inputdiv").style.display = "block"
	document.getElementById("compReadout").innerHTML = "???";
	document.getElementById('bidIn').value = "";
}

function bid() {
	//document.getElementById("debug").innerHTML = "test";
	
	var humanBid = Math.floor(document.getElementById('bidIn').value);
	var bidIllegal = false;
	
	if(humanBid < 0) bidIllegal = true;
	if(humanBid > humanMoney) bidIllegal = true;
	if(bidIllegal)return;
	
	var compBid = getBid();
	
	humanMoney -= humanBid;
	compMoney -= compBid;
	document.getElementById("money").innerHTML = "You have " + humanMoney + ".  Opponent has " + compMoney + ".";
	if(humanBid > compBid){
		moveleft();
	}
	else if(compBid > humanBid){
		moveright();
	}
	if(humanMoney == 0 && compMoney == 0 && pos != 0 & pos != 6){
		document.getElementById("board").innerHTML = document.getElementById("board").innerHTML + " ----Game Drawn";
		document.getElementById("inputdiv").style.display = "none"
		
	}
	round++;
}

function getBid(){
	
	if(compMoney == 0){
		document.getElementById("compReadout").innerHTML = "Computer bid: 0";
		return 0;
	}
	if (humanMoney == 0) {
		document.getElementById("compReadout").innerHTML = "Computer bid: 1";
		return 1;
	}
	if (compMoney > humanMoney*(6-pos)){
		var winningBid = humanMoney + 1;
		document.getElementById("compReadout").innerHTML = "Computer bid: "+winningBid;
		return winningBid;
	}
	
	if(pos == 1) { //DANGER DANGER
		if(compMoney >= humanMoney) {
			document.getElementById("compReadout").innerHTML = "Computer bid: "+humanMoney;
			return humanMoney;
		}
	}
	if(pos == 5) { //Close...
		if(Math.random() <0.33){
			document.getElementById("compReadout").innerHTML = "Computer bid: "+compMoney;
			return compMoney;
		}
		else if(Math.random() <0.66){
			var propBid = (Math.floor((Math.random() * 4)));
			document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
			return propBid;
		}
		else {
			var propBid = (Math.floor(compMoney / 2));
		}
	}

	if(round < 3){
		if(Math.random() < 0.2){
			var propBid = (Math.floor((Math.random() * 3)));
			document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
			return propBid;
		}
		else {
			var propBid = (5 + Math.floor((Math.random() * compMoney/3)));
			document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
			return propBid;
		}
	}
	if(Math.random() < 0.3){
		var propBid = (Math.floor((Math.random() * 3)));
		if(propBid > compMoney) propBid=0;
		document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
		return propBid;
	}
	if(Math.random() < 0.4){
		do {
			propBid = (Math.floor((Math.random() * 10)));
		}
		while(propBid > compMoney)
		document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
		return propBid;
	}	
	else {
		var propBid = Math.floor((Math.random() * compMoney/2) + 1);
		document.getElementById("compReadout").innerHTML = "Computer bid: "+propBid;
		return propBid;
	}
	return 0;
}
	
function clearField() {
	//document.getElementById("debug").innerHTML = "CLEAR";
	document.getElementById('bidIn').value = "";
}
	
</script>

</body>
</html> 
